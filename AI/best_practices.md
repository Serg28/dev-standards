# Правила по лучшим практикам Laravel для ИИ

**Цель:** Следовать лучшим практикам фреймворка Laravel для обеспечения производительности, безопасности и поддерживаемости кода.

---

*   **Правило:** Всю логику валидации входящих данных выноси в классы `Form Request`. Не валидируй данные в контроллере.
    *   **Пример:** `public function store(StorePostRequest $request)`

*   **Правило:** Всегда предпочитай использовать **Eloquent ORM** для взаимодействия с базой данных. Query Builder используй только для сложных запросов, "сырой" SQL — в крайних случаях.

*   **Правило:** Для защиты от уязвимостей Mass Assignment всегда используй свойство `$fillable` или `$guarded` в моделях Eloquent.
    *   **Пример:** `protected $fillable = ['name', 'email'];`

*   **Правило:** В коде приложения всегда используй хелпер `config()` для доступа к переменным окружения. Хелпер `env()` разрешено использовать только внутри конфигурационных файлов (`config/*.php`).
    *   **Пример:** ✅ `config('services.stripe.key')` / ❌ `env('STRIPE_KEY')`

*   **Правило:** Для поиска модели по ID, которая обязательно должна существовать, используй `findOrFail()` или `firstOrFail()`. Это автоматически обработает случай, когда модель не найдена, и вернёт 404 ошибку.

*   **Правило:** Для работы с датами и временем всегда используй `Carbon`. Для получения текущего времени используй хелпер `now()`.

*   **Правило:** Никогда не создавай экземпляры классов с зависимостями вручную (`new MyService()`). Позволь IoC-контейнеру Laravel внедрить их автоматически (например, через конструктор).

*   **Правило:** Для генерации URL для фронтенд-ресурсов (CSS, JS, изображения) всегда используй хелпер `asset()`.

*   **Правило:** Для всех текстовых строк, которые видит пользователь, используй файлы локализации и хелпер `__()`.
